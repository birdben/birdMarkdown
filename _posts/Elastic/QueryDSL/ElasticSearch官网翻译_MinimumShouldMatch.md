---
title: "ElasticSearch官网翻译_MinimumShouldMatch"
date: 2017-07-12 19:19:38
tags: [Elasticsearch]
categories: [Search]
---

## Minimum Should Match

minimum_should_match参数可能的值：

类型|例子|描述
---|---|---
Integer（整数）|3|表示一个固定的值，不管可选子句的数量。
Negative integer（负整数）|-2|表示可选项的总数强制性的减去此数字。
Percentage（百分比）|75%|表示可选条件总数的百分比是必需的。 从百分比计算的数字被舍入并用作最小值。
Negative percentage（负百分比）|-25%|表示可选子句总数的百分比可以没有。 从百分比计算的数字向下舍入，然后从总数中减去以确定最小值。
Combination（组合）|3<90%|正整数，后跟小于符号，后跟任何之前提到的说明符是条件规范。 它表示如果可选子句的数量等于（或小于）整数，则它们都是必需的，但如果它大于整数，则该规范适用。 在这个例子中：如果有1到3个子句都是必需的，但是对于4个或更多的子句，只需要90％。
Multiple combinations（多重组合）|2<-25% 9<-3|多个条件规范可以用空格分隔，每个条件规则只对大于之前的数字有效。 在这个例子中：如果有1或2个子句都是必需的，如果有3-9个子句，除了25％都是必需的，并且如果有超过9个子句，除3个之外都是必需的。

注意：

当处理百分比时，可以使用负值来获得边缘情况下的不同行为。 75％和-25％在处理4个子句时意思相同，但是在处理5个条款时，75％表示需要3个，但-25％表示需要4个。

如果基于规范的计算确定不需要可选子句，则BooleanQueries的常规规则仍然适用在搜索时（不包含必需条件的BooleanQuery必须至少与一个可选子句匹配）

无论计算到达哪个数字，大于可选子句数的值或小于1的值将永远不会被使用。 （即：无论计算结果如何低或有多高，所需匹配的最小数量将不会低于1或大于子句数量）

参考文章：

- https://www.elastic.co/guide/en/elasticsearch/reference/5.4/query-dsl-minimum-should-match.html
